var Loader=function(a){this.files={images:[],scripts:[],fonts:[],styles:[]},this.counter=0,this.loaded=0,this.container=document.querySelector(a)};Loader.prototype.done=function(){this.loaded++,this.loaded===this.counter&&this.callback()},Loader.prototype.loadImages=function(){for(var a=this,b=function(b){try{var c=!1,d=new Image;d.src=b,d.onload=d.onreadystatechange=function(){c||this.readyState&&"complete"!==this.readyState||(c=!0,a.done())}}catch(e){}},c=this.files.images.length-1;c>=0;c--)b(this.files.images[c])},Loader.prototype.loadScripts=function(){for(var a=this,b=function(b){var c=!1,d=document.createElement("script");d.src=b,d.onload=d.onreadystatechange=function(){c||this.readyState&&"complete"!==this.readyState||(c=!0,a.done(),d.parentNode.removeChild(d))},document.getElementsByTagName("head")[0].appendChild(d)},c=this.files.scripts.length-1;c>=0;c--)b(this.files.scripts[c])},Loader.prototype.loadStyles=function(){for(var a=this,b=function(b){var c=document.createElement("div");c.innerHTML="<link href='"+b+"' rel='stylesheet' type='text/css'>";var d=c.querySelector("link"),e=!1;d.onload=d.onreadystatechange=function(){e||this.readyState&&"complete"!==this.readyState||(e=!0,a.done())},document.getElementsByTagName("body")[0].appendChild(c)},c=this.files.styles.length-1;c>=0;c--)b(this.files.styles[c])},Loader.prototype.loadFonts=function(){for(var a=this,b=function(b){var c,d=document.createElement("div"),e=document.createElement("span"),f=document.createElement("span");e.innerHTML="The quick brown fox jumps over the lazy dog",f.innerHTML="The quick brown fox jumps over the lazy dog",e.style.fontFamily="'"+b+"', serif",f.style.fontFamily="serif",d.appendChild(e),d.appendChild(f),document.getElementsByTagName("body")[0].appendChild(d),c=setInterval(function(){e.offsetWidth!==f.offsetWidth&&(clearInterval(c),e.parentNode.parentNode.removeChild(e.parentNode),a.done())},50),setTimeout(function(){c&&clearInterval(c)},1e4)},c=this.files.fonts.length-1;c>=0;c--)b(this.files.fonts[c])},Loader.prototype.run=function(a){this.callback=a,this.loadImages(),this.loadScripts(),this.loadStyles(),this.loadFonts()},Loader.prototype.addFile=function(a,b){this.files[a].push(b),this.counter++},Loader.prototype.addImage=function(a){this.addFile("images",a)},Loader.prototype.addImages=function(a){for(var b=a.length-1;b>=0;b--)this.addImage(a[b])},Loader.prototype.addScript=function(a){this.addFile("scripts",a)},Loader.prototype.addScripts=function(a){for(var b=a.length-1;b>=0;b--)this.addScript(a[b])},Loader.prototype.addStyle=function(a){this.addFile("styles",a)},Loader.prototype.addStyles=function(a){for(var b=a.length-1;b>=0;b--)this.addStyle(a[b])},Loader.prototype.addFont=function(a){this.addFile("fonts",a)},Loader.prototype.addFonts=function(a){for(var b=a.length-1;b>=0;b--)this.addFont(a[b])};